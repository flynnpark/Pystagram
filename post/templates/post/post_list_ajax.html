{% load humanize %}
{% load post_extras %} {# custom filter 추가 #}

{% for post in posts %}
    <ul>
        <li>{{ post.author.profile.nickname }}</li>
        {% if post.author == user %}
        <li><a href="{% url "post:post_delete" post.pk %}">수정</a> / <a href="{% url "post:post_delete" post.pk %}" onclick="return confirm('정말 삭제하시겠습니까?')">삭제</a></li>
        {% endif %}
        <li>
            <input type="button" name="{{ post.id }}" value="Like" class="like">
            <p id="count-{{ post.id }}">{{ post.like_count }}개</p>
            <p id="like-user-{{ post.id }}">
                {% for like_user in post.like_user_set.all %}
                    {{ like_user.profile.nickname }}
                {% endfor %}
            </p>
        </li>
        <li><img src="{{ post.photo.url }}" alt="{{ post.author }}의 사진"></li>
        {{ post|add_link|safe|linebreaksbr }}
        <li>{{ post.created_at|naturaltime }}</li>
    </ul>
{% endfor %}

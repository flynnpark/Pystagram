{% load humanize %}
{% load post_extras %} {# custom filter 추가 #}

{% for post in posts %}
    <ul>
        <li>{{ post.author.profile.nickname }}</li>
        {% if post.author == user %}
        <li><a href="{% url "post:post_delete" post.pk %}">수정</a></li>
        <li>
            <form class="" action="{% url "post:post_delete" post.pk %}" method="post">
                {% csrf_token %}
                <input type="submit" name="" value="삭제" onclick="return confirm('정말 삭제하시겠습니까?')">
            </form>
        </li>
        {% endif %}
        <li>
            <input type="button" name="{{ post.id }}" value="Like" class="like">
            <p id="count-{{ post.id }}">{{ post.like_count }}개</p>
            <p id="like-user-{{ post.id }}">
                {% for like_user in post.like_user_set.all %}
                    {{ like_user.profile.nickname }}
                {% endfor %}
            </p>
        </li>
        <li><img src="{{ post.photo.url }}" alt="{{ post.author }}의 사진"></li>
        {{ post|add_link|safe|linebreaksbr }}
        <li>{{ post.created_at|naturaltime }}</li>

        <div id="comment-list-ajax-post{{ post.id }}" class=""></div>

        {% for comment in post.comment_set.all %}
        <li>{{ comment.suthor.profile.nickname }} : {{ comment.content }}</li>
        {% endfor %}

        {% if user.is_authenticated %}
        <li id="add-comment-post{{ post.id }}">
            {{ comment_form }}
            <input type="button" name="{{ post.id }}" value="등록" class="add-comment">
        </li>
        {% endif %}
    </ul>
    <hr>
{% endfor %}
